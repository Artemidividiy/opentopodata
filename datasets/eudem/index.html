
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Open DEM server.">
      
      
      
      
        <link rel="canonical" href="https://www.opentopodata.org/datasets/eudem/">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.4">
    
    
      
        <title>EU-DEM - Open Topo Data</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.15aa0b43.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.75751829.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-59478184-7","www.opentopodata.org"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#eu-dem" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://www.opentopodata.org" title="Open Topo Data" class="md-header-nav__button md-logo" aria-label="Open Topo Data">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Open Topo Data
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              EU-DEM
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/ajnisbet/opentopodata/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ajnisbet/opentopodata
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://www.opentopodata.org" title="Open Topo Data" class="md-nav__button md-logo" aria-label="Open Topo Data">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Open Topo Data
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ajnisbet/opentopodata/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ajnisbet/opentopodata
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../server/" class="md-nav__link">
      Server docs
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../api/" class="md-nav__link">
      API docs
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../changelog/" class="md-nav__link">
      Release notes
    </a>
  </li>

    
      
      
      


  


  
  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Datasets
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Datasets" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Datasets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../aster/" class="md-nav__link">
      ASTER
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../etopo1/" class="md-nav__link">
      ETOPO1
    </a>
  </li>

        
          
          
          


  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        EU-DEM
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      EU-DEM
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#coverage" class="md-nav__link">
    Coverage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accuracy" class="md-nav__link">
    Accuracy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coastline" class="md-nav__link">
    Coastline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-eu-dem-to-open-topo-data" class="md-nav__link">
    Adding EU-DEM to Open Topo Data
  </a>
  
    <nav class="md-nav" aria-label="Adding EU-DEM to Open Topo Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#buffering-tiles-optional" class="md-nav__link">
    Buffering tiles (optional)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#public-api" class="md-nav__link">
    Public API
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attribution" class="md-nav__link">
    Attribution
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../mapzen/" class="md-nav__link">
      Mapzen
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../ned/" class="md-nav__link">
      NED
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../nzdem/" class="md-nav__link">
      NZ DEM
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../srtm/" class="md-nav__link">
      SRTM
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../emod2018/" class="md-nav__link">
      EMOD bathymetry
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../gebco2020/" class="md-nav__link">
      GEBCO bathymetry
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../bkg/" class="md-nav__link">
      BKG
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
    
    <label class="md-nav__link" for="nav-6">
      Notes
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Notes" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../notes/windows-support/" class="md-nav__link">
      Windows support
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../notes/cloud-storage/" class="md-nav__link">
      Cloud storage
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../notes/invalid-srtm-zips/" class="md-nav__link">
      Invalid SRTM zips
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../notes/dataset-sizes/" class="md-nav__link">
      Dataset sizes
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../notes/buffering-tiles/" class="md-nav__link">
      Buffering tiles
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../notes/multiple-datasets/" class="md-nav__link">
      Multiple datasets
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../notes/performance-optimisation/" class="md-nav__link">
      Performance optimisation
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../notes/running-without-docker/" class="md-nav__link">
      Run without docker
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#coverage" class="md-nav__link">
    Coverage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accuracy" class="md-nav__link">
    Accuracy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coastline" class="md-nav__link">
    Coastline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-eu-dem-to-open-topo-data" class="md-nav__link">
    Adding EU-DEM to Open Topo Data
  </a>
  
    <nav class="md-nav" aria-label="Adding EU-DEM to Open Topo Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#buffering-tiles-optional" class="md-nav__link">
    Buffering tiles (optional)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#public-api" class="md-nav__link">
    Public API
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attribution" class="md-nav__link">
    Attribution
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ajnisbet/opentopodata/edit/master/docs/datasets/eudem.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="eu-dem">EU-DEM</h1>
<p><a href="https://www.eea.europa.eu/data-and-maps/data/copernicus-land-monitoring-service-eu-dem">EU-DEM</a> is an elevation dataset covering Europe at a 25 metre resolution.</p>
<p>The dataset was created by merging elevation data from the SRTM and ASTER global datasets, as well as from Soviet topo maps at high latitudes. The datum used is <a href="https://spatialreference.org/ref/epsg/evrf2000-height/">EVRS2000</a>.</p>
<h2 id="coverage">Coverage</h2>
<p>The dataset covers European Environment Agency member states, plus some countries to the east. Coverage extends to small parts of Northern Africa. Unlike SRTM, EU-DEM includes the Scandinavian regions north of 60°.</p>
<p style="text-align:center; padding: 1rem 0">
  <img src="/img/eudem.jpg" alt="EU-DEM elevation">
  <br>
  <em>Render of EU-DEM elevation.</em>
</p>

<h2 id="accuracy">Accuracy</h2>
<p>The stated vertical accuracy is ± 7m RMSE. Differences to SRTM and ASTER typically fall within this 7m range even with the datasets using slightly different vertical datums. Elevations for <a href="https://www.google.com/maps/place/46%C2%B014'33.2%22N+6%C2%B010'32.1%22E/@46.2374461,6.1073519,12z/">Lake Geneva, Switzerland</a> are <a href="https://api.opentopodata.org/v1/srtm30m?locations=46.242557,206.175588">370m</a>, <a href="https://api.opentopodata.org/v1/aster30m?locations=46.242557,206.175588">374m</a>, and <a href="https://api.opentopodata.org/v1/eudem25m?locations=46.242557,206.175588">372m</a> for SRTM, ASTER, and EU-DEM respectively.</p>
<h2 id="coastline">Coastline</h2>
<p>EU-DEM uses <code>NODATA</code> values for elevations over seas and oceans, where both ASTER and SRTM assign these areas an elevation of 0m. This means that Open Topo Data isn't able to interpolate elevations for locations very close to the coast and will return a value of <code>NaN</code> in places where SRTM and ASTER might return a 0m or 1m elevation.</p>
<p>The advantage of the <code>NODATA</code> oceans is that you cane use EU-DEM without clipping to a coastline shapefile.</p>
<h2 id="adding-eu-dem-to-open-topo-data">Adding EU-DEM to Open Topo Data</h2>
<p>Make a new folder for the dataset:</p>
<div class="codehilite"><pre><span></span><code>mkdir ./data/eudem
</code></pre></div>

<p>Download the dataset from <a href="https://land.copernicus.eu/imagery-in-situ/eu-dem/eu-dem-v1.1?tab=download">Copernicus</a>. There are 27 files. Unzip them and move all the <code>.TIF</code> files into the data folder (you don't need the <code>.aux.xml</code>, <code>.ovr</code>, or <code>.TFw</code> files).</p>
<p>Your data folder should now contain only 27 TIF files:</p>
<div class="codehilite"><pre><span></span><code>ls ./data/eudem

<span class="c1"># eu_dem_v11_E00N20.TIF</span>
<span class="c1"># eu_dem_v11_E10N00.TIF</span>
<span class="c1"># eu_dem_v11_E10N10.TIF</span>
<span class="c1"># ...</span>
</code></pre></div>

<p>If you have <a href="https://gdal.org">gdal</a> installed, the easiest thing to do here is build a <a href="https://gdal.org/drivers/raster/vrt.html">VRT</a> - a single raster file that links to the 27 tiles and which Open Topo Data can treat as a single-file dataset.</p>
<div class="codehilite"><pre><span></span><code>mkdir ./data/eudem-vrt
<span class="nb">cd</span> ./data/eudem-vrt
gdalbuildvrt -tr <span class="m">25</span> <span class="m">25</span> -tap -te <span class="m">0</span> <span class="m">0</span> <span class="m">8000000</span> <span class="m">6000000</span> eudem.vrt ../eudem/*.TIF
<span class="nb">cd</span> ../../
</code></pre></div>

<p>The <code>tr</code>, <code>tap</code>, and <code>te</code> options in the above command ensure that slices from the VRT will use the exact values and grid of the source rasters.</p>
<p>Then create a <code>config.yaml</code> file:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">datasets</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">eudem25m</span>
  <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">data/eudem-vrt/</span>
</code></pre></div>

<p>Finally, rebuild to enable the new dataset at <a href="http://localhost:5000/v1/eudem25m?locations=51.575,-3.220">localhost:5000/v1/eudem25m?locations=51.575,-3.220</a>.</p>
<div class="codehilite"><pre><span></span><code>make build <span class="o">&amp;&amp;</span> make run
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Avoiding gdal</p>
<p>If you don't have gdal installed, you can use the tiles directly. There are instructions for this <a href="https://github.com/ajnisbet/opentopodata/blob/f012ec136bebcd97e1dc05645e91a6d2487127dc/docs/datasets/eudem.md#adding-eu-dem-to-open-topo-data">here</a>, but because the EU-DEM tiles don't come with an overlap you will get a <code>null</code> elevation at locations within 0.5 pixels of tile edges. </p>
</div>
<h3 id="buffering-tiles-optional">Buffering tiles (optional)</h3>
<p>The tiles provided by EU-DEM don't overlap and cover slightly less than a 1000km square. This means you'll get a <code>null</code> result for coordinates along the tile edges.</p>
<p>The <code>.vrt</code> approach above solves the overlap issue, but for improved performance you can leave the tiles separate and add a buffer to each one. This is the code I used on the public API to do this:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">glob</span> <span class="kn">import</span> <span class="n">glob</span>
<span class="kn">import</span> <span class="nn">subprocess</span>

<span class="kn">import</span> <span class="nn">rasterio</span>


<span class="c1"># Prepare paths.</span>
<span class="n">input_pattern</span> <span class="o">=</span> <span class="s1">&#39;data/eudem/*.TIF&#39;</span>
<span class="n">input_paths</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="p">(</span><span class="n">input_pattern</span><span class="p">))</span>
<span class="k">assert</span> <span class="n">input_paths</span>
<span class="n">vrt_path</span> <span class="o">=</span> <span class="s1">&#39;data/eudem-vrt/eudem.vrt&#39;</span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="s1">&#39;data/eudem-buffered/&#39;</span>
<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>



<span class="c1"># EU-DEM specific options.</span>
<span class="n">tile_size</span> <span class="o">=</span> <span class="mi">1_000_000</span>
<span class="n">buffer_size</span> <span class="o">=</span> <span class="mi">50</span>

<span class="k">for</span> <span class="n">input_path</span> <span class="ow">in</span> <span class="n">input_paths</span><span class="p">:</span>

    <span class="c1"># Get tile bounds.</span>
    <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">input_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">bottom</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">bottom</span><span class="p">)</span>
        <span class="n">left</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">left</span><span class="p">)</span>

    <span class="c1"># For EU-DEM only: round this partial tile down to the nearest tile_size.</span>
    <span class="k">if</span> <span class="n">left</span> <span class="o">==</span> <span class="mi">943750</span><span class="p">:</span>
        <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># New tile name in SRTM format.</span>
    <span class="n">output_name</span> <span class="o">=</span> <span class="s1">&#39;N&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">bottom</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;E&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">left</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.TIF&#39;</span>
    <span class="n">output_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">output_name</span><span class="p">)</span>

    <span class="c1"># New bounds.</span>
    <span class="n">xmin</span> <span class="o">=</span> <span class="n">left</span> <span class="o">-</span> <span class="n">buffer_size</span>
    <span class="n">xmax</span> <span class="o">=</span> <span class="n">left</span> <span class="o">+</span> <span class="n">tile_size</span> <span class="o">+</span> <span class="n">buffer_size</span>
    <span class="n">ymin</span> <span class="o">=</span> <span class="n">bottom</span> <span class="o">-</span> <span class="n">buffer_size</span>
    <span class="n">ymax</span> <span class="o">=</span> <span class="n">bottom</span> <span class="o">+</span> <span class="n">tile_size</span> <span class="o">+</span> <span class="n">buffer_size</span>

    <span class="c1"># EU-DEM tiles don&#39;t cover negative locations.</span>
    <span class="n">xmin</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">xmin</span><span class="p">)</span>
    <span class="n">ymin</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ymin</span><span class="p">)</span>

    <span class="c1"># Do the transformation.</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;gdal_translate&#39;</span><span class="p">,</span>
        <span class="s1">&#39;-a_srs&#39;</span><span class="p">,</span> <span class="s1">&#39;EPSG:3035&#39;</span><span class="p">,</span>  <span class="c1"># EU-DEM crs.</span>
        <span class="s1">&#39;-co&#39;</span><span class="p">,</span> <span class="s1">&#39;NUM_THREADS=ALL_CPUS&#39;</span><span class="p">,</span>
        <span class="s1">&#39;-co&#39;</span><span class="p">,</span> <span class="s1">&#39;COMPRESS=DEFLATE&#39;</span><span class="p">,</span>
        <span class="s1">&#39;-co&#39;</span><span class="p">,</span> <span class="s1">&#39;BIGTIFF=YES&#39;</span><span class="p">,</span>
        <span class="s1">&#39;--config&#39;</span><span class="p">,</span> <span class="s1">&#39;GDAL_CACHEMAX&#39;</span><span class="p">,</span><span class="s1">&#39;512&#39;</span><span class="p">,</span>
        <span class="s1">&#39;-projwin&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">xmin</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">ymax</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">xmax</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">ymin</span><span class="p">),</span>
        <span class="n">vrt_path</span><span class="p">,</span> <span class="n">output_path</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="n">r</span><span class="o">.</span><span class="n">check_returncode</span><span class="p">()</span>
</code></pre></div>

<p>These new files can be used in Open Topo Data with the following <code>config.yaml</code> file</p>
<div class="codehilite"><pre><span></span><code><span class="nt">datasets</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">eudem25m</span>
  <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">data/eudem-buffered/</span>
  <span class="nt">filename_epsg</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3035</span>
  <span class="nt">filename_tile_size</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1000000</span>
</code></pre></div>

<p>and rebuilding:</p>
<div class="codehilite"><pre><span></span><code>make build <span class="o">&amp;&amp;</span> make run
</code></pre></div>

<h2 id="public-api">Public API</h2>
<p>The Open Topo Data public API lets you query EU-DEM for free:</p>
<div class="codehilite"><pre><span></span><code>curl https://api.opentopodata.org/v1/eudem25m?locations=57.688709,11.976404
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;elevation&quot;</span><span class="p">:</span> <span class="mf">54.576168060302734</span><span class="p">,</span>
      <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;lat&quot;</span><span class="p">:</span> <span class="mf">57.688709</span><span class="p">,</span>
        <span class="nt">&quot;lng&quot;</span><span class="p">:</span> <span class="mf">11.976404</span>
      <span class="p">},</span>
      <span class="nt">&quot;dataset&quot;</span><span class="p">:</span> <span class="s2">&quot;eudem25m&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span>
<span class="p">}</span>
</code></pre></div>

<p>Open Topo Data hosts version 1.1 of the dataset.</p>
<h2 id="attribution">Attribution</h2>
<p>Released by <a href="http://land.copernicus.eu/">Copernicus</a> under the following terms:</p>
<p><em>Access to data is based on a principle of full, open and free access as established by the Copernicus data and information policy Regulation (EU) No 1159/2013 of 12 July 2013. This regulation establishes registration and licensing conditions for GMES/Copernicus users. Free, full and open access to this data set is made on the conditions that:</em></p>
<ol>
<li>
<p><em>When distributing or communicating Copernicus dedicated data and Copernicus service information to the public, users shall inform the public of the source of that data and information.</em></p>
</li>
<li>
<p><em>Users shall make sure not to convey the impression to the public that the user's activities are officially endorsed by the Union.</em></p>
</li>
<li>
<p><em>Where that data or information has been adapted or modified, the user shall clearly state this.</em></p>
</li>
<li>
<p><em>The data remain the sole property of the European Union. Any information and data produced in the framework of the action shall be the sole property of the European Union. Any communication and publication by the beneficiary shall acknowledge that the data were produced "with funding by the European Union".</em></p>
</li>
</ol>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../etopo1/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                ETOPO1
              </div>
            </div>
          </a>
        
        
          <a href="../mapzen/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Mapzen
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.93c04032.min.js"></script>
      <script src="../../assets/javascripts/bundle.83e5331e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../js/extra.js"></script>
      
    
  </body>
</html>